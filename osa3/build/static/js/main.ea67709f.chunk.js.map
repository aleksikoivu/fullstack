{"version":3,"sources":["components/Filter.js","components/ShowPersons.js","components/NewPerson.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["Filter","props","onChange","filter","ShowPersons","persons","map","person","key","id","name","number","onClick","deleteP","value","NewPerson","onSubmit","submit","nameChange","numberChange","type","Notification","errorMessage","className","baseUrl","Axios","get","newObject","post","delete","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","personsToShow","setPersonsToShow","message","setMessage","setErrorMessage","useEffect","console","log","personService","then","response","data","event","target","query","_personsToShow","toLowerCase","indexOf","preventDefault","nameObject","found","find","undefined","changedPerson","window","confirm","setTimeout","concat","catch","error","toBeDeleted","parseInt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea67709f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = (props) => {\r\n  return( \r\n    <div>Filter phonebook by:\r\n      <input onChange = {props.filter}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst ShowPersons = (props) => {\r\n    return(\r\n      <div>\r\n        {props.persons.map(person=>\r\n          <ul key={person.id}>\r\n            {person.name} - {person.number} - <button onClick={props.deleteP} value={person.id}>Klikkaa mua boii</button>\r\n          </ul>)}\r\n      </div>\r\n     )\r\n   }\r\n\r\nexport default ShowPersons","import React from 'react'\r\n\r\nconst NewPerson = (props) => {\r\n    return(\r\n      <form onSubmit={props.submit}>\r\n      <div>\r\n        Name: <input \r\n          value={props.name}\r\n          onChange={props.nameChange}/>\r\n      </div>\r\n      <div>\r\n        Number: <input\r\n          value={props.number}\r\n          onChange={props.numberChange}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n    )\r\n   }\r\n\r\n   export default NewPerson","import React from 'react';\r\nimport '../index.css'\r\n\r\nconst Notification = (props) => {\r\n    if (props.Notification === null && props.errorMessage === null){\r\n        return null\r\n    }\r\n    \r\n  return( \r\n    <div>\r\n      <li className='notification'>{props.Notification}</li>\r\n      <li className='error'>{props.errorMessage}</li>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification;","import Axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return Axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return Axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    return Axios.delete(baseUrl+`/${id}`)\r\n}\r\n\r\nconst updatePerson = (id, newObject) => {\r\n    return Axios.put(baseUrl+`/${id}`, newObject)\r\n}\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    deletePerson: deletePerson,\r\n    updatePerson: updatePerson\r\n}","import React, { useState, useEffect } from 'react';\r\n\r\nimport Filter from './components/Filter';\r\nimport ShowPersons from './components/ShowPersons'\r\nimport NewPerson from './components/NewPerson'\r\nimport Notification from './components/Message'\r\n//import Axios from 'axios';\r\nimport personService from './services/persons'\r\n\r\n//npx json-server --port=3001 --watch db.json\r\n\r\nconst App = () => {\r\n\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('Etunimi Sukunimi')\r\n  const [ newNumber, setNewNumber ] = useState('040 123 123')\r\n  const [ personsToShow, setPersonsToShow ] = useState([])\r\n  const [ message, setMessage] = useState()\r\n  const [ errorMessage, setErrorMessage] = useState()\r\n\r\n  useEffect(() => {\r\n    console.log(\"effect\")\r\n    // Axios.get('http://localhost:3001/persons')\r\n    // .then(response => {\r\n    //   console.log(\"promise fulfilled\")\r\n    //   setPersons(response.data)\r\n    //   setPersonsToShow(response.data)\r\n    personService.getAll()\r\n    .then(response => {\r\n      console.log(response.data)\r\n      setPersons(response.data)\r\n      setPersonsToShow(response.data)\r\n    })\r\n  },[])\r\n\r\n  const applyFilter = (event) => {\r\n    console.log(event.target.value)\r\n    var query = event.target.value \r\n    // Jos annetaan kyselyyn jotain sisältöä\r\n    if(event.target.value){\r\n    var _personsToShow = persons.filter(function(person){\r\n      return !person.name.toLowerCase().indexOf(query.toLowerCase())\r\n    });setPersonsToShow(_personsToShow) // Niin asetetaan se filtteri personstoshowille\r\n    }\r\n    // Muussa tapauksessa se on vain persons lista\r\n    else(setPersonsToShow(persons))\r\n    console.log(personsToShow)\r\n  }\r\n  \r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    // uuden nimiolion luonti\r\n    const nameObject = {\r\n      name: newName,\r\n      //id: Math.floor(Math.random()*1000),\r\n      number: newNumber\r\n    }\r\n\r\n    // tarkastus sille että onko nimi jo listassa\r\n    let found = persons.find(person => person.name.toLowerCase() === nameObject.name.toLowerCase())\r\n    // console.log(found)\r\n    // found ei palauta undefinediä eli henkilö löytyy\r\n    if(found !== undefined){\r\n      const changedPerson = {...found, number: newNumber}\r\n      //alert(`${newName} is already in the phonebook`)\r\n      if(window.confirm(`Do you want to update ${newName}'s number?`)){\r\n        console.log(\"update\")\r\n        personService.updatePerson(found.id, changedPerson)\r\n        .then(response=>{\r\n          console.log(response)\r\n          personService.getAll()\r\n          .then(response => {\r\n            setPersons(response.data)\r\n            setPersonsToShow(response.data)\r\n            setMessage(`${changedPerson.name} number changed`)\r\n            setTimeout(()=>{\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n        })\r\n      }\r\n    }\r\n    // muussa tapauksessa (found===undef) eli henkilöä ei löydy\r\n    else{\r\n\r\n\r\n    personService.create(nameObject)\r\n    .then(response=>{\r\n      // uuden henkilön lisääminen taulukkoon\r\n      setPersons(persons.concat(nameObject))\r\n      // pitäs varmaan saada joku päivitys tuolle listalle että se ilmestyy - check\r\n      setPersonsToShow(persons.concat(nameObject))\r\n      console.log(\"response from creation\")\r\n      console.log(response)\r\n      console.log(\"added\")\r\n      setMessage(`${nameObject.name} added`)\r\n      setTimeout(()=>{\r\n        setMessage(null)\r\n      }, 3000)\r\n    })\r\n    .catch(error => {\r\n      // console.log(error.response.data)\r\n      // console.log(error.response.data.error)\r\n      // console.log(\"error caught\")\r\n      setErrorMessage(error.response.data.error)\r\n      setTimeout(()=>{\r\n        setErrorMessage(null)\r\n      },3000)\r\n    })\r\n\r\n    setNewName('')\r\n    setNewNumber('')\r\n\r\n    //console.log(persons)\r\n    }\r\n  }\r\n\r\n  const deletePerson = (event) => {\r\n    if(window.confirm(`Delete person?`)){\r\n      //console.log(\"triggered again\")\r\n      console.log(event.target.value)\r\n      //console.log(typeof(persons[0].id))\r\n      //console.log(typeof(event.target.value))\r\n      //haetaan se nimi vielä talteen\r\n      //let found = persons.find(person => person.name.toLowerCase() === nameObject.name.toLowerCase())\r\n      let toBeDeleted = persons.find(person => person.id === parseInt(event.target.value))\r\n      console.log(\"to be deleted = \",toBeDeleted)\r\n\r\n      personService.deletePerson(event.target.value)\r\n      .then(response => {\r\n        console.log(response.data)\r\n        console.log(\"deleted\")\r\n        personService.getAll()\r\n        .then(response => {\r\n          setPersons(response.data)\r\n          setPersonsToShow(response.data)\r\n          setMessage(`${toBeDeleted.name} deleted`)\r\n          setTimeout(()=>{\r\n            setMessage(null)\r\n          }, 3000)\r\n        })\r\n      })\r\n      .catch(error => {\r\n        setErrorMessage(`${toBeDeleted.name} is already removed from the server`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        },3000)\r\n      })\r\n  }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification Notification={message} errorMessage={errorMessage}/>\r\n      <Filter filter={applyFilter}/>\r\n\r\n      <NewPerson name = {newName} number = {newNumber} nameChange={handleNameChange} numberChange={handleNumberChange} submit={addName}/>\r\n\r\n      <h2>Numbers</h2>\r\n\r\n      <ShowPersons persons = {personsToShow} deleteP = {deletePerson}/>\r\n    \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n//serviceWorker.unregister();\r\n"],"sourceRoot":""}